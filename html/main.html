{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %} {% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'favicon.png' %}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/mg.css' %}" />
    <link rel="stylesheet" href="{% static 'css/tipped.css' %}" />

    <!-- charts ------>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js"></script>   <!--to be removed soon -->
    <script src="{% static "js/chart_plugin.js" %}"></script>                                           <!--to be removed soon -->
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.3.0.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.3.0.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.3.0.min.js" crossorigin="anonymous"></script>
    <!---------------->


    <!-- React.js -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <!-------------->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!----- AUTOCOMPLETE ----->
    <script src="{% static 'js/autocomplete.js' %}"></script>
</head>
<body data-gr-c-s-loaded="true" class="d-flex flex-column h-100">
<div id="page">
    <header>
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: #ecf0f1; height: 60px;">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
            </button>
            <a href="/" class="navbar-brand">

               <div class="d-none d-sm-none d-md-none d-lg-block mt-4">
                   <img class="p-4" src="{% static 'img/MG.png' %}" style="width: 150px; height: auto; overflow: hidden;" />
               </div>
            </a>
            <div class="container-fluid">
                <div class="collapse navbar-collapse" id="navbarSupportedContent" style="background-color: #ecf0f1;">
                    <ul class="navbar-nav me-auto mb-1 mb-md-0">
                            {% if not user.is_authenticated %}
                              <li class="nav-item">
                                <a  class="btn btn-sm btn-outline-primary" href="/accounts/signup/">{% trans "Sign up" %}</a>
                              </li>
                            {% else %}
                               <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    {%  trans "Account" %}
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" href="/start/profile/">{%  trans "Profile" %}</a></li>
                                    <li><a class="dropdown-item" href="/health/">{%  trans "Health" %}</a></li>
                                </ul>
                              </li>
                              <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  {% trans "Your trips" %}
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" href="/start/add/">{% trans "Add a trip" %}</a></li>
                                    <li><a class="dropdown-item disabled" href="">{% trans "Explore" %}</a></li>
                                    <li><a class="dropdown-item disabled" href="#">{% trans "Past activities" %}</a></li>
                                </ul>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link" href="/inbox/">
                                  {% trans "Messages" %}
                                </a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link" href="/groups/">
                                  {% trans "Groups" %}
                                </a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link" href="/shop/">
                                  {% trans "Shop" %}
                                </a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link me-5" href="/notifications/">
                                  <span class="badge bg-secondary" id="notifcount">0</span>
                                </a>
                              </li>
                            {% endif %}
                        </ul>
                          {% if user.is_authenticated %}
                              {% csrf_token %}
                            <form class="d-flex" method="get" action="/start/q/">
                                <input class="form-control me-3" type="search" id="id_what" name="what" placeholder="{% trans 'Search' %}" autocomplete="off">
                                <button class="btn btn-sm btn-outline-success me-3" type="submit">{% trans "Search" %}</button>
                            </form>
                            <div id="suggestions" class="autocomplete"></div>
                            <a class="btn btn-outline-secondary btn-sm" href="/accounts/logout">{% trans "Logout" %}</a>

                          {% else %}
                            <a class="btn btn-outline-secondary btn-sm" href="/accounts/login">{%  trans "Log in" %}</a>
                          {% endif %}
                </div>
            </div>
        </nav>
    </header>
    <main class="flex-shrink-0" role="main">
{% block content %}


{% endblock %}
    </main>
    <footer class="footer fixed-bottom">
        <div class="container">
            <div class="row">
                <div class="col">
                    <p class="d-inline text-wrap badge bg-dark">&copy;{% now "Y" %}</p>
                    <p class="d-inline text-wrap badge bg-light text-dark small text-decoration-none">
                    <a href="/about/" target="_blank">{% trans 'about' %}</a> |
                    <a href="https://www.paypal.me/kamilsj/50/" target="_blank">{% trans 'donate' %}</a> |
                    <a href="https://github.com/kamilsj/mountaingrip/issues" target="blank">{% trans 'bugs' %}</a>
                    </p>
                </div>
                <div class="col" style="text-align-last: right;">
                    <p class="badge bg-light text-dark"><a href="https://www.buymeacoffee.com/mountaingrip">{% trans 'Buy me a coffee' %}</a></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/ajax.js' %}"></script>
    <script src="{% static 'js/mg.js' %}"></script>
    <script src="{% static 'js/tipped.js' %}"></script>

    {% if user.is_authenticated %}
    <script type="text/javascript">
        $(function (){
            setInterval(update({{ user.id }}), 30000);
        });
    </script>
    {% endif %}
    <script type="text/javascript">
        $(function() {
            Tipped.create('.tp');
        });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124583577-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-124583577-1');
    </script>
</div>
</body>
</html>